{% extends "base.html" %}
{% block content %}

<!-- Floating bubbles -->
<div class="floating-shape small" style="top:10%; left:15%;"></div>
<div class="floating-shape medium" style="top:30%; left:75%;"></div>
<div class="floating-shape large" style="top:65%; left:25%;"></div>
<div class="floating-shape small" style="top:85%; left:80%;"></div>
<div class="floating-shape medium" style="top:50%; left:55%;"></div>

<div class="container my-5">
  {% if leave %}
  <div class="register p-4 shadow-sm rounded mx-auto" style="max-width:700px;">
    <h3 class="register-heading mb-4 text-center">Leave Request Details</h3>

    <!-- Leave Info -->
    <div class="mb-4 text-white">
      <p><strong>Employee:</strong> {{ leave.employee.name }}</p>
      <p><strong>Type:</strong> {{ leave.leave_type }}</p>
      <p><strong>Start:</strong> {{ leave.start_date }}</p>
      <p><strong>End:</strong> {{ leave.end_date }}</p>
      <p><strong>Reason:</strong> {{ leave.reason }}</p>
      <p>
        <strong>Status:</strong>
        <span class="badge 
            {% if leave.status == 'Pending' %}bg-warning
            {% elif leave.status == 'Approved' %}bg-success
            {% elif leave.status == 'Rejected' %}bg-danger
            {% else %}bg-secondary{% endif %}">
          {{ leave.status }}
        </span>
      </p>
    </div>

    <!-- Manager Form -->
    <form method="POST" class="row g-3">
      {{ form.hidden_tag() }}
      <div class="col-md-6">
        {{ form.status.label(class="form-label text-white") }}
        {{ form.status(class="form-select") }}
        {% for e in form.status.errors %}
          <small class="text-danger">{{ e }}</small>
        {% endfor %}
      </div>

      <div class="col-md-12">
        {{ form.comment.label(class="form-label text-white") }}
        {{ form.comment(class="form-control", rows=3) }}
        {% for e in form.comment.errors %}
          <small class="text-danger">{{ e }}</small>
        {% endfor %}
      </div>

      <div class="col-md-12 text-end">
        {{ form.submit(class="btnRegister") }}
        <a href="{{ url_for('manager.dashboard') }}" class="btnBack">Back</a>
      </div>
    </form>
  </div>
  {% else %}
    <p class="text-center text-muted">No leave selected.</p>
  {% endif %}
</div>

<style>
/* Background animation */
body {
    background: linear-gradient(270deg, #0F2027, #2c5364, #0F2027);
    background-size: 600% 600%;
    animation: gradientAnimation 15s ease infinite;
    overflow-x: hidden;
}
@keyframes gradientAnimation {
    0% {background-position: 0% 50%;}
    50% {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
}

/* Floating bubbles */
.floating-shape {
    position: absolute;
    border-radius: 50%;
    opacity: 0.12;
    animation: floatAnimation ease-in-out infinite;
    z-index: 0;
}
.small { width: 30px; height: 30px; background: #2c5364; animation-duration: 12s; }
.medium { width: 70px; height: 70px; background: #0F2027; animation-duration: 18s; }
.large { width: 120px; height: 120px; background: #2c5364; animation-duration: 24s; }
@keyframes floatAnimation {
    0% { transform: translateY(0px) translateX(0px); }
    50% { transform: translateY(-20px) translateX(15px); }
    100% { transform: translateY(0px) translateX(0px); }
}

/* Blurred Card */
.register {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.15);
    color: #fff;
    position: relative;
    z-index: 2;
}

/* Heading */
.register-heading {
    font-weight: 600;
    color: #fff;
}

/* Buttons */
.btnRegister {
    border-radius: 1.5rem;
    padding: 8px 20px;
    background: #2c5364;
    color: #fff;
    font-weight: 600;
    border: none;
}
.btnRegister:hover {
    background: #0F2027;
    color: #fff;
}
.btnBack {
    border-radius: 1.5rem;
    padding: 8px 20px;
    border: 2px solid #2c5364;
    background: transparent;
    color: #2c5364;
    text-decoration: none;
    transition: 0.3s;
}
.btnBack:hover {
    background: #2c5364;
    color: #fff;
}
</style>

{% endblock %}
